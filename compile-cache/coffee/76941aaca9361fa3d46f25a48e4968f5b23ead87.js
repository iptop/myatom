(function() {
  var Beautifiers, EventEmitter, Languages, Promise, _, _plus, allowUnsafeEval, editorconfig, extend, fs, logger, path, pkg, strip, trackingId, ua, version, yaml,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    extend1 = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    slice = [].slice;

  _ = require('lodash');

  _plus = require('underscore-plus');

  Promise = require('bluebird');

  Languages = require('../languages/');

  path = require('path');

  logger = require('../logger')(__filename);

  EventEmitter = require('events').EventEmitter;

  extend = null;

  ua = null;

  fs = null;

  strip = null;

  yaml = null;

  editorconfig = null;

  allowUnsafeEval = require('loophole').allowUnsafeEval;

  allowUnsafeEval(function() {
    return ua = require("universal-analytics");
  });

  pkg = require("../../package.json");

  version = pkg.version;

  trackingId = "UA-52729731-2";


  /*
  Register all supported beautifiers
   */

  module.exports = Beautifiers = (function(superClass) {
    extend1(Beautifiers, superClass);


    /*
      List of beautifier names
    
      To register a beautifier add its name here
     */

    Beautifiers.prototype.beautifierNames = ['uncrustify', 'align-yaml', 'autopep8', 'coffee-formatter', 'coffee-fmt', 'cljfmt', 'clang-format', 'crystal', 'dfmt', 'elm-format', 'hh_format', 'htmlbeautifier', 'csscomb', 'gherkin', 'gofmt', 'goimports', 'latex-beautify', 'fortran-beautifier', 'js-beautify', 'jscs', 'eslint', 'lua-beautifier', 'nginx-beautify', 'ocp-indent', 'perltidy', 'php-cs-fixer', 'phpcbf', 'prettydiff', 'pybeautifier', 'pug-beautify', 'puppet-fix', 'remark', 'rubocop', 'ruby-beautify', 'rustfmt', 'sass-convert', 'sqlformat', 'stylish-haskell', 'tidy-markdown', 'typescript-formatter', 'vue-beautifier', 'yapf', 'erl_tidy', 'marko-beautifier', 'formatR', 'beautysh'];


    /*
      List of loaded beautifiers
    
      Autogenerated in `constructor` from `beautifierNames`
     */

    Beautifiers.prototype.beautifiers = null;


    /*
      All beautifier options
    
      Autogenerated in `constructor`
     */

    Beautifiers.prototype.options = null;


    /*
      Languages
     */

    Beautifiers.prototype.languages = new Languages();


    /*
      Constructor
     */

    function Beautifiers() {
      this.getOptions = bind(this.getOptions, this);
      this.beautifiers = _.map(this.beautifierNames, function(name) {
        var Beautifier;
        Beautifier = require("./" + name);
        return new Beautifier();
      });
      this.options = this.loadOptions();
    }

    Beautifiers.prototype.loadOptions = function() {
      var error, options;
      try {
        options = require('../options.json');
        options = _.mapValues(options, function(lang) {
          var defaultIndentChar, defaultIndentSize, defaultIndentWithTabs, ref, ref1, scope, softTabs, tabLength;
          scope = lang.scope;
          tabLength = (ref = typeof atom !== "undefined" && atom !== null ? atom.config.get('editor.tabLength', {
            scope: scope
          }) : void 0) != null ? ref : 4;
          softTabs = (ref1 = typeof atom !== "undefined" && atom !== null ? atom.config.get('editor.softTabs', {
            scope: scope
          }) : void 0) != null ? ref1 : true;
          defaultIndentSize = (softTabs ? tabLength : 1);
          defaultIndentChar = (softTabs ? " " : "\t");
          defaultIndentWithTabs = !softTabs;
          if (_.has(lang, "properties.indent_size")) {
            _.set(lang, "properties.indent_size.default", defaultIndentSize);
          }
          if (_.has(lang, "properties.indent_char")) {
            _.set(lang, "properties.indent_char.default", defaultIndentChar);
          }
          if (_.has(lang, "properties.indent_with_tabs")) {
            _.set(lang, "properties.indent_with_tabs.default", defaultIndentWithTabs);
          }
          if (_.has(lang, "properties.wrap_attributes_indent_size")) {
            _.set(lang, "properties.wrap_attributes_indent_size.default", defaultIndentSize);
          }
          return lang;
        });
      } catch (error1) {
        error = error1;
        console.error("Error loading options", error);
        options = {};
      }
      return options;
    };


    /*
      From https://github.com/atom/notifications/blob/01779ade79e7196f1603b8c1fa31716aa4a33911/lib/notification-issue.coffee#L130
     */

    Beautifiers.prototype.encodeURI = function(str) {
      str = encodeURI(str);
      return str.replace(/#/g, '%23').replace(/;/g, '%3B');
    };

    Beautifiers.prototype.getBeautifiers = function(language) {
      return _.filter(this.beautifiers, function(beautifier) {
        return _.includes(beautifier.languages, language);
      });
    };

    Beautifiers.prototype.getBeautifierForLanguage = function(language) {
      var beautifier, beautifiers, preferredBeautifierName;
      beautifiers = this.getBeautifiers(language.name);
      logger.verbose('beautifiers', _.map(beautifiers, 'name'));
      preferredBeautifierName = atom.config.get("atom-beautify." + language.namespace + ".default_beautifier");
      beautifier = _.find(beautifiers, function(beautifier) {
        return beautifier.name === preferredBeautifierName;
      }) || beautifiers[0];
      return beautifier;
    };

    Beautifiers.prototype.getExtension = function(filePath) {
      if (filePath) {
        return path.extname(filePath).substr(1);
      }
    };

    Beautifiers.prototype.getLanguages = function(grammar, filePath) {
      var fileExtension, languages;
      fileExtension = this.getExtension(filePath);
      if (fileExtension) {
        languages = this.languages.getLanguages({
          grammar: grammar,
          extension: fileExtension
        });
      } else {
        languages = this.languages.getLanguages({
          grammar: grammar
        });
      }
      logger.verbose(languages, grammar, fileExtension);
      return languages;
    };

    Beautifiers.prototype.getLanguage = function(grammar, filePath) {
      var language, languages;
      languages = this.getLanguages(grammar, filePath);
      if (languages.length > 0) {
        language = languages[0];
      }
      return language;
    };

    Beautifiers.prototype.getOptionsForLanguage = function(allOptions, language) {
      var options, selections;
      selections = (language.fallback || []).concat([language.namespace]);
      return options = this.getOptions(selections, allOptions) || {};
    };

    Beautifiers.prototype.transformOptions = function(beautifier, languageName, options) {
      var beautifierOptions, field, fields, fn, i, op, transformedOptions, vals;
      beautifierOptions = beautifier.options[languageName];
      if (typeof beautifierOptions === "boolean") {
        return options;
      } else if (typeof beautifierOptions === "object") {
        transformedOptions = {};
        for (field in beautifierOptions) {
          op = beautifierOptions[field];
          if (typeof op === "string") {
            transformedOptions[field] = options[op];
          } else if (typeof op === "function") {
            transformedOptions[field] = op(options[field]);
          } else if (typeof op === "boolean") {
            if (op === true) {
              transformedOptions[field] = options[field];
            }
          } else if (_.isArray(op)) {
            fields = 2 <= op.length ? slice.call(op, 0, i = op.length - 1) : (i = 0, []), fn = op[i++];
            vals = _.map(fields, function(f) {
              return options[f];
            });
            transformedOptions[field] = fn.apply(null, vals);
          }
        }
        return transformedOptions;
      } else {
        logger.warn("Unsupported Language options: ", beautifierOptions);
        return options;
      }
    };

    Beautifiers.prototype.trackEvent = function(payload) {
      return this.track("event", payload);
    };

    Beautifiers.prototype.trackTiming = function(payload) {
      return this.track("timing", payload);
    };

    Beautifiers.prototype.track = function(type, payload) {
      var error, userId, uuid;
      try {
        if (atom.config.get("core.telemetryConsent") === "limited") {
          logger.info("Analytics is enabled.");
          if (!atom.config.get("atom-beautify.general._analyticsUserId")) {
            uuid = require("node-uuid");
            atom.config.set("atom-beautify.general._analyticsUserId", uuid.v4());
          }
          userId = atom.config.get("atom-beautify.general._analyticsUserId");
          if (this.analytics == null) {
            this.analytics = new ua(trackingId, userId, {
              headers: {
                "User-Agent": navigator.userAgent
              }
            });
          }
          return this.analytics[type](payload).send();
        } else {
          return logger.info("Analytics is disabled.");
        }
      } catch (error1) {
        error = error1;
        return logger.error(error);
      }
    };

    Beautifiers.prototype.beautify = function(text, allOptions, grammar, filePath, arg) {
      var language, onSave, ref;
      ref = arg != null ? arg : {}, onSave = ref.onSave, language = ref.language;
      return Promise.all(allOptions).then((function(_this) {
        return function(allOptions) {
          return new Promise(function(resolve, reject) {
            var beautifier, beautifyOnSave, context, detail, fileExtension, langDisabled, options, repoBugsUrl, startTime, title, unsupportedGrammar;
            logger.debug('beautify', text, allOptions, grammar, filePath, onSave, language);
            logger.verbose(allOptions);
            if (language == null) {
              language = _this.getLanguage(grammar, filePath);
            }
            fileExtension = _this.getExtension(filePath);
            if (!language) {
              unsupportedGrammar = true;
              logger.verbose('Unsupported language');
              if (onSave) {
                return resolve(null);
              }
            } else {
              logger.verbose("Language " + language.name + " supported");
              langDisabled = atom.config.get("atom-beautify." + language.namespace + ".disabled");
              unsupportedGrammar = false;
              if (langDisabled) {
                logger.verbose("Language " + language.name + " is disabled");
                return resolve(null);
              }
              beautifyOnSave = atom.config.get("atom-beautify." + language.namespace + ".beautify_on_save");
              if (onSave && !beautifyOnSave) {
                logger.verbose("Beautify on save is disabled for language " + language.name);
                return resolve(null);
              }
              options = _this.getOptionsForLanguage(allOptions, language);
              logger.verbose(grammar, language);
              logger.verbose("language options: " + (JSON.stringify(options, null, 4)));
              logger.verbose(language.name, filePath, options, allOptions);
              beautifier = _this.getBeautifierForLanguage(language);
              if (beautifier == null) {
                unsupportedGrammar = true;
                logger.verbose('Beautifier for language not found');
              } else {
                logger.verbose('beautifier', beautifier.name);
                options = _this.transformOptions(beautifier, language.name, options);
                _this.emit("beautify::start");
                context = {
                  filePath: filePath,
                  fileExtension: fileExtension
                };
                startTime = new Date();
                beautifier.loadExecutables().then(function(executables) {
                  logger.verbose('executables', executables);
                  return beautifier.beautify(text, language.name, options, context);
                }).then(function(result) {
                  resolve(result);
                  _this.trackTiming({
                    utc: "Beautify",
                    utv: language != null ? language.name : void 0,
                    utt: new Date() - startTime,
                    utl: version
                  });
                  if (!result) {
                    return _this.trackEvent({
                      ec: version,
                      ea: "Beautify:Empty",
                      el: language != null ? language.name : void 0
                    });
                  }
                })["catch"](function(error) {
                  logger.error(error);
                  reject(error);
                  return _this.trackEvent({
                    ec: version,
                    ea: "Beautify:Error",
                    el: language != null ? language.name : void 0
                  });
                })["finally"](function() {
                  return _this.emit("beautify::end");
                });
              }
            }
            _this.trackEvent({
              ec: version,
              ea: "Beautify",
              el: language != null ? language.name : void 0
            });
            if (onSave) {
              _this.trackEvent({
                ec: version,
                ea: "Beautify:OnSave",
                el: language != null ? language.name : void 0
              });
            } else {
              _this.trackEvent({
                ec: version,
                ea: "Beautify:Manual",
                el: language != null ? language.name : void 0
              });
            }
            if (unsupportedGrammar) {
              if (atom.config.get("atom-beautify.general.muteUnsupportedLanguageErrors")) {
                return resolve(null);
              } else {
                repoBugsUrl = pkg.bugs.url;
                title = "Atom Beautify could not find a supported beautifier for this file";
                detail = "Atom Beautify could not determine a supported beautifier to handle this file with grammar \"" + grammar + "\" and extension \"" + fileExtension + "\". If you would like to request support for this file and its language, please create an issue for Atom Beautify at " + repoBugsUrl;
                if (typeof atom !== "undefined" && atom !== null) {
                  atom.notifications.addWarning(title, {
                    detail: detail,
                    dismissable: true
                  });
                }
                return resolve(null);
              }
            }
          });
        };
      })(this));
    };

    Beautifiers.prototype.findFileResults = {};

    Beautifiers.prototype.getUserHome = function() {
      return process.env.HOME || process.env.HOMEPATH || process.env.USERPROFILE;
    };

    Beautifiers.prototype.verifyExists = function(fullPath) {
      if (fs == null) {
        fs = require("fs");
      }
      if (fs.existsSync(fullPath)) {
        return fullPath;
      } else {
        return null;
      }
    };


    /*
      Searches for a file with a specified name starting with
      'dir' and going all the way up either until it finds the file
      or hits the root.
    
      @param {string} name filename to search for (e.g. .jshintrc)
      @param {string} dir directory to start search from (default:
      current working directory)
      @param {boolean} upwards should recurse upwards on failure? (default: true)
    
      @returns {string} normalized filename
     */

    Beautifiers.prototype.findFile = function(name, dir, upwards) {
      var filename, parent;
      if (upwards == null) {
        upwards = true;
      }
      if (path == null) {
        path = require("path");
      }
      dir = dir || process.cwd();
      filename = path.normalize(path.join(dir, name));
      if (this.findFileResults[filename] !== void 0) {
        return this.findFileResults[filename];
      }
      parent = path.resolve(dir, "../");
      if (this.verifyExists(filename)) {
        this.findFileResults[filename] = filename;
        return filename;
      }
      if (dir === parent) {
        this.findFileResults[filename] = null;
        return null;
      }
      if (upwards) {
        return findFile(name, parent);
      } else {
        return null;
      }
    };


    /*
      Tries to find a configuration file in either project directory
      or in the home directory. Configuration files are named
      '.jsbeautifyrc'.
    
      @param {string} config name of the configuration file
      @param {string} file path to the file to be linted
      @param {boolean} upwards should recurse upwards on failure? (default: true)
    
      @returns {string} a path to the config file
     */

    Beautifiers.prototype.findConfig = function(config, file, upwards) {
      var dir, envs, home, proj;
      if (upwards == null) {
        upwards = true;
      }
      if (path == null) {
        path = require("path");
      }
      dir = path.dirname(path.resolve(file));
      envs = this.getUserHome();
      home = path.normalize(path.join(envs, config));
      proj = this.findFile(config, dir, upwards);
      logger.verbose(dir, proj, home);
      if (proj) {
        return proj;
      }
      if (this.verifyExists(home)) {
        return home;
      }
      return null;
    };

    Beautifiers.prototype.getConfigOptionsFromSettings = function(langs) {
      var config, options;
      config = atom.config.get('atom-beautify');
      return options = _.pick(config, langs);
    };

    Beautifiers.prototype.getConfig = function(startPath, upwards) {
      var configPath, contents, detail, e, error, externalOptions, jsonError, title;
      if (upwards == null) {
        upwards = true;
      }
      startPath = (typeof startPath === "string" ? startPath : "");
      if (!startPath) {
        return {};
      }
      configPath = this.findConfig(".jsbeautifyrc", startPath, upwards);
      logger.verbose('configPath', configPath, startPath, upwards);
      externalOptions = void 0;
      if (configPath) {
        if (fs == null) {
          fs = require("fs");
        }
        try {
          contents = fs.readFileSync(configPath, {
            encoding: "utf8"
          });
        } catch (error1) {
          error = error1;
          contents = null;
        }
        if (!contents) {
          externalOptions = {};
        } else {
          try {
            if (strip == null) {
              strip = require("strip-json-comments");
            }
            externalOptions = JSON.parse(strip(contents));
          } catch (error1) {
            e = error1;
            jsonError = e.message;
            logger.debug("Failed parsing config as JSON: " + configPath);
            try {
              if (yaml == null) {
                yaml = require("yaml-front-matter");
              }
              externalOptions = yaml.safeLoad(contents);
            } catch (error1) {
              e = error1;
              title = "Atom Beautify failed to parse config as JSON or YAML";
              detail = "Parsing '.jsbeautifyrc' at " + configPath + "\nJSON: " + jsonError + "\nYAML: " + e.message;
              if (typeof atom !== "undefined" && atom !== null) {
                atom.notifications.addWarning(title, {
                  detail: detail,
                  dismissable: true
                });
              }
              logger.debug("Failed parsing config as YAML and JSON: " + configPath);
              externalOptions = {};
            }
          }
        }
      } else {
        externalOptions = {};
      }
      return externalOptions;
    };

    Beautifiers.prototype.getOptionsForPath = function(editedFilePath, editor) {
      var allOptions, configOptions, editorConfigOptions, editorOptions, homeOptions, isNested, isSelection, languageNamespaces, p, pc, pf, projectOptions, softTabs, tabLength, userHome;
      languageNamespaces = this.languages.namespaces;
      editorOptions = {};
      if (editor != null) {
        isSelection = !!editor.getSelectedText();
        softTabs = editor.softTabs;
        tabLength = editor.getTabLength();
        editorOptions = {
          indent_size: (softTabs ? tabLength : 1),
          indent_char: (softTabs ? " " : "\t"),
          indent_with_tabs: !softTabs
        };
      }
      configOptions = this.getConfigOptionsFromSettings(languageNamespaces);
      userHome = this.getUserHome();
      homeOptions = this.getConfig(path.join(userHome, "FAKEFILENAME"), false);
      if (editedFilePath != null) {
        if (editorconfig == null) {
          editorconfig = require('editorconfig');
        }
        editorConfigOptions = editorconfig.parse(editedFilePath).then(function(editorConfigOptions) {
          logger.verbose('editorConfigOptions', editorConfigOptions);
          if (editorConfigOptions.indent_style === 'space') {
            editorConfigOptions.indent_char = " ";
          } else if (editorConfigOptions.indent_style === 'tab') {
            editorConfigOptions.indent_char = "\t";
            editorConfigOptions.indent_with_tabs = true;
            if (editorConfigOptions.tab_width) {
              editorConfigOptions.indent_size = editorConfigOptions.tab_width;
            }
          }
          return {
            _default: editorConfigOptions
          };
        });
        projectOptions = [];
        p = path.dirname(editedFilePath);
        while (p !== path.resolve(p, "../")) {
          pf = path.join(p, "FAKEFILENAME");
          pc = this.getConfig(pf, false);
          isNested = this.isNestedOptions(pc);
          if (!isNested) {
            pc = {
              _default: pc
            };
          }
          projectOptions.push(pc);
          p = path.resolve(p, "../");
        }
      } else {
        editorConfigOptions = {};
        projectOptions = [];
      }
      allOptions = [
        {
          _default: editorOptions
        }, configOptions, {
          _default: homeOptions
        }, editorConfigOptions
      ];
      projectOptions.reverse();
      allOptions = allOptions.concat(projectOptions);
      return allOptions;
    };

    Beautifiers.prototype.isNestedOptions = function(currOptions) {
      var containsNested, key;
      containsNested = false;
      key = void 0;
      if (currOptions._default) {
        return true;
      }
      for (key in currOptions) {
        if (_.indexOf(this.languages.namespaces, key) >= 0 && typeof currOptions[key] === "object") {
          containsNested = true;
          break;
        }
      }
      return containsNested;
    };

    Beautifiers.prototype.getOptions = function(selections, allOptions) {
      var options, self;
      self = this;
      if (_ == null) {
        _ = require("lodash");
      }
      if (extend == null) {
        extend = require("extend");
      }
      logger.verbose('getOptions selections', selections, allOptions);
      options = _.reduce(allOptions, (function(_this) {
        return function(result, currOptions) {
          var collectedConfig, containsNested, i, len, selection;
          collectedConfig = currOptions._default || {};
          containsNested = _this.isNestedOptions(currOptions);
          logger.verbose(containsNested, currOptions);
          if (!containsNested) {
            currOptions = {
              _default: currOptions
            };
          }
          for (i = 0, len = selections.length; i < len; i++) {
            selection = selections[i];
            logger.verbose('options', selection, currOptions[selection]);
            _.merge(collectedConfig, currOptions[selection]);
            logger.verbose('options', selection, collectedConfig);
          }
          return extend(result, collectedConfig);
        };
      })(this), {});
      return options;
    };

    return Beautifiers;

  })(EventEmitter);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZmlsZTovLy9DOi9Vc2Vycy9zdGFydC8uYXRvbS9wYWNrYWdlcy9hdG9tLWJlYXV0aWZ5L3NyYy9iZWF1dGlmaWVycy9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBLDJKQUFBO0lBQUE7Ozs7O0VBQUEsQ0FBQSxHQUFJLE9BQUEsQ0FBUSxRQUFSOztFQUNKLEtBQUEsR0FBUSxPQUFBLENBQVEsaUJBQVI7O0VBQ1IsT0FBQSxHQUFVLE9BQUEsQ0FBUSxVQUFSOztFQUNWLFNBQUEsR0FBWSxPQUFBLENBQVEsZUFBUjs7RUFDWixJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVI7O0VBQ1AsTUFBQSxHQUFTLE9BQUEsQ0FBUSxXQUFSLENBQUEsQ0FBcUIsVUFBckI7O0VBQ1IsZUFBZ0IsT0FBQSxDQUFRLFFBQVI7O0VBR2pCLE1BQUEsR0FBUzs7RUFDVCxFQUFBLEdBQUs7O0VBQ0wsRUFBQSxHQUFLOztFQUNMLEtBQUEsR0FBUTs7RUFDUixJQUFBLEdBQU87O0VBQ1AsWUFBQSxHQUFlOztFQUdkLGtCQUFtQixPQUFBLENBQVEsVUFBUjs7RUFDcEIsZUFBQSxDQUFnQixTQUFBO1dBQ2QsRUFBQSxHQUFLLE9BQUEsQ0FBUSxxQkFBUjtFQURTLENBQWhCOztFQUVBLEdBQUEsR0FBTSxPQUFBLENBQVEsb0JBQVI7O0VBQ04sT0FBQSxHQUFVLEdBQUcsQ0FBQzs7RUFHZCxVQUFBLEdBQWE7OztBQUViOzs7O0VBR0EsTUFBTSxDQUFDLE9BQVAsR0FBdUI7Ozs7QUFDckI7Ozs7OzswQkFLQSxlQUFBLEdBQWtCLENBQ2hCLFlBRGdCLEVBRWhCLFlBRmdCLEVBR2hCLFVBSGdCLEVBSWhCLGtCQUpnQixFQUtoQixZQUxnQixFQU1oQixRQU5nQixFQU9oQixjQVBnQixFQVFoQixTQVJnQixFQVNoQixNQVRnQixFQVVoQixZQVZnQixFQVdoQixXQVhnQixFQVloQixnQkFaZ0IsRUFhaEIs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NENBQUE7O1lBRUUsTUFBTSxDQUFDLE9BQVAsQ0FBZSxTQUFmLEVBQTBCLFNBQTFCLEVBQXFDLFdBQVksQ0FBQSxTQUFBLENBQWpEO1lBQ0EsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxlQUFSLEVBQXlCLFdBQVksQ0FBQSxTQUFBLENBQXJDO1lBQ0EsTUFBTSxDQUFDLE9BQVAsQ0FBZSxTQUFmLEVBQTBCLFNBQTFCLEVBQXFDLGVBQXJDO0FBSkY7aUJBTUEsTUFBQSxDQUFPLE1BQVAsRUFBZSxlQUFmO1FBckI2QjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBckIsRUFzQlIsRUF0QlE7YUErQlY7SUF4Q1c7Ozs7S0Fqb0I0QjtBQTdCM0MiLCJzb3VyY2VzQ29udGVudCI6WyJfID0gcmVxdWlyZSgnbG9kYXNoJylcclxuX3BsdXMgPSByZXF1aXJlKCd1bmRlcnNjb3JlLXBsdXMnKVxyXG5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKVxyXG5MYW5ndWFnZXMgPSByZXF1aXJlKCcuLi9sYW5ndWFnZXMvJylcclxucGF0aCA9IHJlcXVpcmUoJ3BhdGgnKVxyXG5sb2dnZXIgPSByZXF1aXJlKCcuLi9sb2dnZXInKShfX2ZpbGVuYW1lKVxyXG57RXZlbnRFbWl0dGVyfSA9IHJlcXVpcmUgJ2V2ZW50cydcclxuXHJcbiMgTGF6eSBsb2FkZWQgZGVwZW5kZW5jaWVzXHJcbmV4dGVuZCA9IG51bGxcclxudWEgPSBudWxsXHJcbmZzID0gbnVsbFxyXG5zdHJpcCA9IG51bGxcclxueWFtbCA9IG51bGxcclxuZWRpdG9yY29uZmlnID0gbnVsbFxyXG5cclxuIyBNaXNjXHJcbnthbGxvd1Vuc2FmZUV2YWx9ID0gcmVxdWlyZSAnbG9vcGhvbGUnXHJcbmFsbG93VW5zYWZlRXZhbCAtPlxyXG4gIHVhID0gcmVxdWlyZShcInVuaXZlcnNhbC1hbmFseXRpY3NcIilcclxucGtnID0gcmVxdWlyZShcIi4uLy4uL3BhY2thZ2UuanNvblwiKVxyXG52ZXJzaW9uID0gcGtnLnZlcnNpb25cclxuXHJcbiMgQW5hbHl0aWNzXHJcbnRyYWNraW5nSWQgPSBcIlVBLTUyNzI5NzMxLTJcIlxyXG5cclxuIyMjXHJcblJlZ2lzdGVyIGFsbCBzdXBwb3J0ZWQgYmVhdXRpZmllcnNcclxuIyMjXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgQmVhdXRpZmllcnMgZXh0ZW5kcyBFdmVudEVtaXR0ZXJcclxuICAjIyNcclxuICAgIExpc3Qgb2YgYmVhdXRpZmllciBuYW1lc1xyXG5cclxuICAgIFRvIHJlZ2lzdGVyIGEgYmVhdXRpZmllciBhZGQgaXRzIG5hbWUgaGVyZVxyXG4gICMjI1xyXG4gIGJlYXV0aWZpZXJOYW1lcyA6IFtcclxuICAgICd1bmNydXN0aWZ5J1xyXG4gICAgJ2FsaWduLXlhbWwnXHJcbiAgICAnYXV0b3BlcDgnXHJcbiAgICAnY29mZmVlLWZvcm1hdHRlcidcclxuICAgICdjb2ZmZWUtZm10J1xyXG4gICAgJ2NsamZtdCdcclxuICAgICdjbGFuZy1mb3JtYXQnXHJcbiAgICAnY3J5c3RhbCdcclxuICAgICdkZm10J1xyXG4gICAgJ2VsbS1mb3JtYXQnXHJcbiAgICAnaGhfZm9ybWF0J1xyXG4gICAgJ2h0bWxiZWF1dGlmaWVyJ1xyXG4gICAgJ2Nzc2NvbWInXHJcbiAgICAnZ2hlcmtpbidcclxuICAgICdnb2ZtdCdcclxuICAgICdnb2ltcG9ydHMnXHJcbiAgICAnbGF0ZXgtYmVhdXRpZnknXHJcbiAgICAnZm9ydHJhbi1iZWF1dGlmaWVyJ1xyXG4gICAgJ2pzLWJlYXV0aWZ5J1xyXG4gICAgJ2pzY3MnXHJcbiAgICAnZXNsaW50J1xyXG4gICAgJ2x1YS1iZWF1dGlmaWVyJ1xyXG4gICAgJ25naW54LWJlYXV0aWZ5J1xyXG4gICAgJ29jcC1pbmRlbnQnXHJcbiAgICAncGVybHRpZHknXHJcbiAgICAncGhwLWNzLWZpeGVyJ1xyXG4gICAgJ3BocGNiZidcclxuICAgICdwcmV0dHlkaWZmJ1xyXG4gICAgJ3B5YmVhdXRpZmllcidcclxuICAgICdwdWctYmVhdXRpZnknXHJcbiAgICAncHVwcGV0LWZpeCdcclxuICAgICdyZW1hcmsnXHJcbiAgICAncnVib2NvcCdcclxuICAgICdydWJ5LWJlYXV0aWZ5J1xyXG4gICAgJ3J1c3RmbXQnXHJcbiAgICAnc2Fzcy1jb252ZXJ0J1xyXG4gICAgJ3NxbGZvcm1hdCdcclxuICAgICdzdHlsaXNoLWhhc2tlbGwnXHJcbiAgICAndGlkeS1tYXJrZG93bidcclxuICAgICd0eXBlc2NyaXB0LWZvcm1hdHRlcidcclxuICAgICd2dWUtYmVhdXRpZmllcidcclxuICAgICd5YXBmJ1xyXG4gICAgJ2VybF90aWR5J1xyXG4gICAgJ21hcmtvLWJlYXV0aWZpZXInXHJcbiAgICAnZm9ybWF0UidcclxuICAgICdiZWF1dHlzaCdcclxuICBdXHJcblxyXG4gICMjI1xyXG4gICAgTGlzdCBvZiBsb2FkZWQgYmVhdXRpZmllcnNcclxuXHJcbiAgICBBdXRvZ2VuZXJhdGVkIGluIGBjb25zdHJ1Y3RvcmAgZnJvbSBgYmVhdXRpZmllck5hbWVzYFxyXG4gICMjI1xyXG4gIGJlYXV0aWZpZXJzIDogbnVsbFxyXG5cclxuICAjIyNcclxuICAgIEFsbCBiZWF1dGlmaWVyIG9wdGlvbnNcclxuXHJcbiAgICBBdXRvZ2VuZXJhdGVkIGluIGBjb25zdHJ1Y3RvcmBcclxuICAjIyNcclxuICBvcHRpb25zIDogbnVsbFxyXG5cclxuICAjIyNcclxuICAgIExhbmd1YWdlc1xyXG4gICMjI1xyXG4gIGxhbmd1YWdlcyA6IG5ldyBMYW5ndWFnZXMoKVxyXG5cclxuICAjIyNcclxuICAgIENvbnN0cnVjdG9yXHJcbiAgIyMjXHJcbiAgY29uc3RydWN0b3IgOiAtPlxyXG5cclxuICAgICMgTG9hZCBiZWF1dGlmaWVyc1xyXG4gICAgQGJlYXV0aWZpZXJzID0gXy5tYXAoIEBiZWF1dGlmaWVyTmFtZXMsIChuYW1lKSAtPlxyXG4gICAgICBCZWF1dGlmaWVyID0gcmVxdWlyZShcIi4vI3tuYW1lfVwiKVxyXG4gICAgICBuZXcgQmVhdXRpZmllcigpXHJcbiAgICApXHJcblxyXG4gICAgQG9wdGlvbnMgPSBAbG9hZE9wdGlvbnMoKVxyXG5cclxuICBsb2FkT3B0aW9ucyA6IC0+XHJcbiAgICB0cnlcclxuICAgICAgb3B0aW9ucyA9IHJlcXVpcmUoJy4uL29wdGlvbnMuanNvbicpXHJcbiAgICAgIG9wdGlvbnMgPSBfLm1hcFZhbHVlcyhvcHRpb25zLCAobGFuZykgLT5cclxuICAgICAgICBzY29wZSA9IGxhbmcuc2NvcGVcclxuICAgICAgICB0YWJMZW5ndGggPSBhdG9tPy5jb25maWcuZ2V0KCdlZGl0b3IudGFiTGVuZ3RoJywgc2NvcGU6IHNjb3BlKSA/IDRcclxuICAgICAgICBzb2Z0VGFicyA9IGF0b20/LmNvbmZpZy5nZXQoJ2VkaXRvci5zb2Z0VGFicycsIHNjb3BlOiBzY29wZSkgPyB0cnVlXHJcbiAgICAgICAgZGVmYXVsdEluZGVudFNpemUgPSAoaWYgc29mdFRhYnMgdGhlbiB0YWJMZW5ndGggZWxzZSAxKVxyXG4gICAgICAgIGRlZmF1bHRJbmRlbnRDaGFyID0gKGlmIHNvZnRUYWJzIHRoZW4gXCIgXCIgZWxzZSBcIlxcdFwiKVxyXG4gICAgICAgIGRlZmF1bHRJbmRlbnRXaXRoVGFicyA9IG5vdCBzb2Z0VGFic1xyXG4gICAgICAgIGlmIF8uaGFzKGxhbmcsIFwicHJvcGVydGllcy5pbmRlbnRfc2l6ZVwiKVxyXG4gICAgICAgICAgXy5zZXQobGFuZywgXCJwcm9wZXJ0aWVzLmluZGVudF9zaXplLmRlZmF1bHRcIiwgZGVmYXVsdEluZGVudFNpemUpXHJcbiAgICAgICAgaWYgXy5oYXMobGFuZywgXCJwcm9wZXJ0aWVzLmluZGVudF9jaGFyXCIpXHJcbiAgICAgICAgICBfLnNldChsYW5nLCBcInByb3BlcnRpZXMuaW5kZW50X2NoYXIuZGVmYXVsdFwiLCBkZWZhdWx0SW5kZW50Q2hhcilcclxuICAgICAgICBpZiBfLmhhcyhsYW5nLCBcInByb3BlcnRpZXMuaW5kZW50X3dpdGhfdGFic1wiKVxyXG4gICAgICAgICAgXy5zZXQobGFuZywgXCJwcm9wZXJ0aWVzLmluZGVudF93aXRoX3RhYnMuZGVmYXVsdFwiLCBkZWZhdWx0SW5kZW50V2l0aFRhYnMpXHJcbiAgICAgICAgaWYgXy5oYXMobGFuZywgXCJwcm9wZXJ0aWVzLndyYXBfYXR0cmlidXRlc19pbmRlbnRfc2l6ZVwiKVxyXG4gICAgICAgICAgXy5zZXQobGFuZywgXCJwcm9wZXJ0aWVzLndyYXBfYXR0cmlidXRlc19pbmRlbnRfc2l6ZS5kZWZhdWx0XCIsIGRlZmF1bHRJbmRlbnRTaXplKVxyXG4gICAgICAgIHJldHVybiBsYW5nXHJcbiAgICAgIClcclxuICAgIGNhdGNoIGVycm9yXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIG9wdGlvbnNcIiwgZXJyb3IpXHJcbiAgICAgIG9wdGlvbnMgPSB7fVxyXG4gICAgcmV0dXJuIG9wdGlvbnNcclxuXHJcbiAgIyMjXHJcbiAgICBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9tL25vdGlmaWNhdGlvbnMvYmxvYi8wMTc3OWFkZTc5ZTcxOTZmMTYwM2I4YzFmYTMxNzE2YWE0YTMzOTExL2xpYi9ub3RpZmljYXRpb24taXNzdWUuY29mZmVlI0wxMzBcclxuICAjIyNcclxuICBlbmNvZGVVUkkgOiAoc3RyKSAtPlxyXG4gICAgc3RyID0gZW5jb2RlVVJJKHN0cilcclxuICAgIHN0ci5yZXBsYWNlKC8jL2csICclMjMnKS5yZXBsYWNlKC87L2csICclM0InKVxyXG5cclxuXHJcbiAgZ2V0QmVhdXRpZmllcnMgOiAobGFuZ3VhZ2UpIC0+XHJcblxyXG4gICAgIyBsb2dnZXIudmVyYm9zZShAYmVhdXRpZmllcnMpXHJcbiAgICBfLmZpbHRlciggQGJlYXV0aWZpZXJzLCAoYmVhdXRpZmllcikgLT5cclxuXHJcbiAgICAgICMgbG9nZ2VyLnZlcmJvc2UoJ2JlYXV0aWZpZXInLGJlYXV0aWZpZXIsIGxhbmd1YWdlKVxyXG4gICAgICBfLmluY2x1ZGVzKGJlYXV0aWZpZXIubGFuZ3VhZ2VzLCBsYW5ndWFnZSlcclxuICAgIClcclxuXHJcbiAgZ2V0QmVhdXRpZmllckZvckxhbmd1YWdlIDogKGxhbmd1YWdlKSAtPlxyXG4gICAgYmVhdXRpZmllcnMgPSBAZ2V0QmVhdXRpZmllcnMobGFuZ3VhZ2UubmFtZSlcclxuICAgIGxvZ2dlci52ZXJib3NlKCdiZWF1dGlmaWVycycsIF8ubWFwKGJlYXV0aWZpZXJzLCAnbmFtZScpKVxyXG4gICAgIyBTZWxlY3QgYmVhdXRpZmllciBmcm9tIGxhbmd1YWdlIGNvbmZpZyBwcmVmZXJlbmNlc1xyXG4gICAgcHJlZmVycmVkQmVhdXRpZmllck5hbWUgPSBhdG9tLmNvbmZpZy5nZXQoXCJhdG9tLWJlYXV0aWZ5LiN7bGFuZ3VhZ2UubmFtZXNwYWNlfS5kZWZhdWx0X2JlYXV0aWZpZXJcIilcclxuICAgIGJlYXV0aWZpZXIgPSBfLmZpbmQoYmVhdXRpZmllcnMsIChiZWF1dGlmaWVyKSAtPlxyXG4gICAgICBiZWF1dGlmaWVyLm5hbWUgaXMgcHJlZmVycmVkQmVhdXRpZmllck5hbWVcclxuICAgICkgb3IgYmVhdXRpZmllcnNbMF1cclxuICAgIHJldHVybiBiZWF1dGlmaWVyXHJcblxyXG4gIGdldEV4dGVuc2lvbiA6IChmaWxlUGF0aCkgLT5cclxuICAgIGlmIGZpbGVQYXRoXHJcbiAgICAgIHJldHVybiBwYXRoLmV4dG5hbWUoZmlsZVBhdGgpLnN1YnN0cigxKVxyXG5cclxuICBnZXRMYW5ndWFnZXMgOiAoZ3JhbW1hciwgZmlsZVBhdGgpIC0+XHJcbiAgICAjIEdldCBsYW5ndWFnZVxyXG4gICAgZmlsZUV4dGVuc2lvbiA9IEBnZXRFeHRlbnNpb24oZmlsZVBhdGgpXHJcblxyXG4gICAgaWYgZmlsZUV4dGVuc2lvblxyXG4gICAgICBsYW5ndWFnZXMgPSBAbGFuZ3VhZ2VzLmdldExhbmd1YWdlcyh7Z3JhbW1hciwgZXh0ZW5zaW9uOiBmaWxlRXh0ZW5zaW9ufSlcclxuICAgIGVsc2VcclxuICAgICAgbGFuZ3VhZ2VzID0gQGxhbmd1YWdlcy5nZXRMYW5ndWFnZXMoe2dyYW1tYXJ9KVxyXG5cclxuICAgIGxvZ2dlci52ZXJib3NlKGxhbmd1YWdlcywgZ3JhbW1hciwgZmlsZUV4dGVuc2lvbilcclxuXHJcbiAgICByZXR1cm4gbGFuZ3VhZ2VzXHJcblxyXG4gIGdldExhbmd1YWdlIDogKGdyYW1tYXIsIGZpbGVQYXRoKSAtPlxyXG4gICAgbGFuZ3VhZ2VzID0gQGdldExhbmd1YWdlcyhncmFtbWFyLCBmaWxlUGF0aClcclxuXHJcbiAgICAjIENoZWNrIGlmIHVuc3VwcG9ydGVkIGxhbmd1YWdlXHJcbiAgICBpZiBsYW5ndWFnZXMubGVuZ3RoID4gMFxyXG4gICAgICBsYW5ndWFnZSA9IGxhbmd1YWdlc1swXVxyXG5cclxuICAgIHJldHVybiBsYW5ndWFnZVxyXG5cclxuICBnZXRPcHRpb25zRm9yTGFuZ3VhZ2UgOiAoYWxsT3B0aW9ucywgbGFuZ3VhZ2UpIC0+XHJcbiAgICAjIE9wdGlvbnMgZm9yIExhbmd1YWdlXHJcbiAgICBzZWxlY3Rpb25zID0gKGxhbmd1YWdlLmZhbGxiYWNrIG9yIFtdKS5jb25jYXQoW2xhbmd1YWdlLm5hbWVzcGFjZV0pXHJcbiAgICBvcHRpb25zID0gQGdldE9wdGlvbnMoc2VsZWN0aW9ucywgYWxsT3B0aW9ucykgb3Ige31cclxuXHJcbiAgdHJhbnNmb3JtT3B0aW9ucyA6IChiZWF1dGlmaWVyLCBsYW5ndWFnZU5hbWUsIG9wdGlvbnMpIC0+XHJcblxyXG4gICAgIyBUcmFuc2Zvcm0gb3B0aW9ucywgaWYgYXBwbGljYWJsZVxyXG4gICAgYmVhdXRpZmllck9wdGlvbnMgPSBiZWF1dGlmaWVyLm9wdGlvbnNbbGFuZ3VhZ2VOYW1lXVxyXG4gICAgaWYgdHlwZW9mIGJlYXV0aWZpZXJPcHRpb25zIGlzIFwiYm9vbGVhblwiXHJcblxyXG4gICAgICAjIExhbmd1YWdlIGlzIHN1cHBvcnRlZCBieSBiZWF1dGlmaWVyXHJcbiAgICAgICMgSWYgdHJ1ZSB0aGVuIGFsbCBvcHRpb25zIGFyZSBkaXJlY3RseSBzdXBwb3J0ZWRcclxuICAgICAgIyBJZiBmYWxzeSB0aGVuIHBhc3MgYWxsIG9wdGlvbnMgdG8gYmVhdXRpZmllcixcclxuICAgICAgIyBhbHRob3VnaCBubyBvcHRpb25zIGFyZSBkaXJlY3RseSBzdXBwb3J0ZWQuXHJcbiAgICAgIHJldHVybiBvcHRpb25zXHJcbiAgICBlbHNlIGlmIHR5cGVvZiBiZWF1dGlmaWVyT3B0aW9ucyBpcyBcIm9iamVjdFwiXHJcblxyXG4gICAgICAjIFRyYW5zZm9ybSB0aGUgb3B0aW9uc1xyXG4gICAgICB0cmFuc2Zvcm1lZE9wdGlvbnMgPSB7fVxyXG5cclxuXHJcbiAgICAgICMgVHJhbnNmb3JtIGZvciBmaWVsZHNcclxuICAgICAgZm9yIGZpZWxkLCBvcCBvZiBiZWF1dGlmaWVyT3B0aW9uc1xyXG4gICAgICAgIGlmIHR5cGVvZiBvcCBpcyBcInN0cmluZ1wiXHJcblxyXG4gICAgICAgICAgIyBSZW5hbWVcclxuICAgICAgICAgIHRyYW5zZm9ybWVkT3B0aW9uc1tmaWVsZF0gPSBvcHRpb25zW29wXVxyXG4gICAgICAgIGVsc2UgaWYgdHlwZW9mIG9wIGlzIFwiZnVuY3Rpb25cIlxyXG5cclxuICAgICAgICAgICMgVHJhbnNmb3JtXHJcbiAgICAgICAgICB0cmFuc2Zvcm1lZE9wdGlvbnNbZmllbGRdID0gb3Aob3B0aW9uc1tmaWVsZF0pXHJcbiAgICAgICAgZWxzZSBpZiB0eXBlb2Ygb3AgaXMgXCJib29sZWFuXCJcclxuXHJcbiAgICAgICAgICAjIEVuYWJsZS9EaXNhYmxlXHJcbiAgICAgICAgICBpZiBvcCBpcyB0cnVlXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkT3B0aW9uc1tmaWVsZF0gPSBvcHRpb25zW2ZpZWxkXVxyXG4gICAgICAgIGVsc2UgaWYgXy5pc0FycmF5KG9wKVxyXG5cclxuICAgICAgICAgICMgQ29tcGxleCBmdW5jdGlvblxyXG4gICAgICAgICAgW2ZpZWxkcy4uLiwgZm5dID0gb3BcclxuICAgICAgICAgIHZhbHMgPSBfLm1hcChmaWVsZHMsIChmKSAtPlxyXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uc1tmXVxyXG4gICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICMgQXBwbHkgZnVuY3Rpb25cclxuICAgICAgICAgIHRyYW5zZm9ybWVkT3B0aW9uc1tmaWVsZF0gPSBmbi5hcHBseSggbnVsbCAsIHZhbHMpXHJcblxyXG4gICAgICAjIFJlcGxhY2Ugb2xkIG9wdGlvbnMgd2l0aCBuZXcgdHJhbnNmb3JtZWQgb3B0aW9uc1xyXG4gICAgICByZXR1cm4gdHJhbnNmb3JtZWRPcHRpb25zXHJcbiAgICBlbHNlXHJcbiAgICAgIGxvZ2dlci53YXJuKFwiVW5zdXBwb3J0ZWQgTGFuZ3VhZ2Ugb3B0aW9uczogXCIsIGJlYXV0aWZpZXJPcHRpb25zKVxyXG4gICAgICByZXR1cm4gb3B0aW9uc1xyXG5cclxuICB0cmFja0V2ZW50IDogKHBheWxvYWQpIC0+XHJcbiAgICBAdHJhY2soXCJldmVudFwiLCBwYXlsb2FkKVxyXG5cclxuICB0cmFja1RpbWluZyA6IChwYXlsb2FkKSAtPlxyXG4gICAgQHRyYWNrKFwidGltaW5nXCIsIHBheWxvYWQpXHJcblxyXG4gIHRyYWNrIDogKHR5cGUsIHBheWxvYWQpIC0+XHJcbiAgICB0cnlcclxuICAgICAgIyBDaGVjayBpZiBBbmFseXRpY3MgaXMgZW5hYmxlZFxyXG4gICAgICBpZiBhdG9tLmNvbmZpZy5nZXQoXCJjb3JlLnRlbGVtZXRyeUNvbnNlbnRcIikgaXMgXCJsaW1pdGVkXCJcclxuICAgICAgICBsb2dnZXIuaW5mbyhcIkFuYWx5dGljcyBpcyBlbmFibGVkLlwiKVxyXG4gICAgICAgICMgU2V0dXAgQW5hbHl0aWNzXHJcbiAgICAgICAgdW5sZXNzIGF0b20uY29uZmlnLmdldChcImF0b20tYmVhdXRpZnkuZ2VuZXJhbC5fYW5hbHl0aWNzVXNlcklkXCIpXHJcbiAgICAgICAgICB1dWlkID0gcmVxdWlyZShcIm5vZGUtdXVpZFwiKVxyXG4gICAgICAgICAgYXRvbS5jb25maWcuc2V0IFwiYXRvbS1iZWF1dGlmeS5nZW5lcmFsLl9hbmFseXRpY3NVc2VySWRcIiwgdXVpZC52NCgpXHJcbiAgICAgICAgIyBTZXR1cCBBbmFseXRpY3MgVXNlciBJZFxyXG4gICAgICAgIHVzZXJJZCA9IGF0b20uY29uZmlnLmdldChcImF0b20tYmVhdXRpZnkuZ2VuZXJhbC5fYW5hbHl0aWNzVXNlcklkXCIpXHJcbiAgICAgICAgQGFuYWx5dGljcyA/PSBuZXcgdWEodHJhY2tpbmdJZCwgdXNlcklkLCB7XHJcbiAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBuYXZpZ2F0b3IudXNlckFnZW50XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBAYW5hbHl0aWNzW3R5cGVdKHBheWxvYWQpLnNlbmQoKVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgbG9nZ2VyLmluZm8oXCJBbmFseXRpY3MgaXMgZGlzYWJsZWQuXCIpXHJcbiAgICBjYXRjaCBlcnJvclxyXG4gICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpXHJcblxyXG5cclxuICBiZWF1dGlmeSA6ICh0ZXh0LCBhbGxPcHRpb25zLCBncmFtbWFyLCBmaWxlUGF0aCwge29uU2F2ZSwgbGFuZ3VhZ2V9ID0ge30pIC0+XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoYWxsT3B0aW9ucylcclxuICAgIC50aGVuKChhbGxPcHRpb25zKSA9PlxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ2JlYXV0aWZ5JywgdGV4dCwgYWxsT3B0aW9ucywgZ3JhbW1hciwgZmlsZVBhdGgsIG9uU2F2ZSwgbGFuZ3VhZ2UpXHJcbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoYWxsT3B0aW9ucylcclxuXHJcbiAgICAgICAgbGFuZ3VhZ2UgPz0gQGdldExhbmd1YWdlKGdyYW1tYXIsIGZpbGVQYXRoKVxyXG4gICAgICAgIGZpbGVFeHRlbnNpb24gPSBAZ2V0RXh0ZW5zaW9uKGZpbGVQYXRoKVxyXG5cclxuICAgICAgICAjIENoZWNrIGlmIHVuc3VwcG9ydGVkIGxhbmd1YWdlXHJcbiAgICAgICAgaWYgIWxhbmd1YWdlXHJcbiAgICAgICAgICB1bnN1cHBvcnRlZEdyYW1tYXIgPSB0cnVlXHJcblxyXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ1Vuc3VwcG9ydGVkIGxhbmd1YWdlJylcclxuXHJcbiAgICAgICAgICAjIENoZWNrIGlmIG9uIHNhdmVcclxuICAgICAgICAgIGlmIG9uU2F2ZVxyXG4gICAgICAgICAgICAjIElnbm9yZSB0aGlzLCBhcyBpdCB3YXMganVzdCBhIGdlbmVyYWwgZmlsZSBzYXZlLCBhbmRcclxuICAgICAgICAgICAgIyBub3QgaW50ZW5kZWQgdG8gYmUgYmVhdXRpZmllZFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggbnVsbCApXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJMYW5ndWFnZSAje2xhbmd1YWdlLm5hbWV9IHN1cHBvcnRlZFwiKVxyXG5cclxuICAgICAgICAgICMgR2V0IGxhbmd1YWdlIGNvbmZpZ1xyXG4gICAgICAgICAgbGFuZ0Rpc2FibGVkID0gYXRvbS5jb25maWcuZ2V0KFwiYXRvbS1iZWF1dGlmeS4je2xhbmd1YWdlLm5hbWVzcGFjZX0uZGlzYWJsZWRcIilcclxuXHJcbiAgICAgICAgICAjIEJlYXV0aWZ5IVxyXG4gICAgICAgICAgdW5zdXBwb3J0ZWRHcmFtbWFyID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAjIENoZWNrIGlmIExhbmd1YWdlIGlzIGRpc2FibGVkXHJcbiAgICAgICAgICBpZiBsYW5nRGlzYWJsZWRcclxuICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJMYW5ndWFnZSAje2xhbmd1YWdlLm5hbWV9IGlzIGRpc2FibGVkXCIpXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCBudWxsIClcclxuXHJcbiAgICAgICAgICAjIEdldCBtb3JlIGxhbmd1YWdlIGNvbmZpZ1xyXG4gICAgICAgICAgYmVhdXRpZnlPblNhdmUgPSBhdG9tLmNvbmZpZy5nZXQoXCJhdG9tLWJlYXV0aWZ5LiN7bGFuZ3VhZ2UubmFtZXNwYWNlfS5iZWF1dGlmeV9vbl9zYXZlXCIpXHJcblxyXG4gICAgICAgICAgIyBWZXJpZnkgaWYgYmVhdXRpZnlpbmcgb24gc2F2ZVxyXG4gICAgICAgICAgaWYgb25TYXZlIGFuZCBub3QgYmVhdXRpZnlPblNhdmVcclxuICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJCZWF1dGlmeSBvbiBzYXZlIGlzIGRpc2FibGVkIGZvciBsYW5ndWFnZSAje2xhbmd1YWdlLm5hbWV9XCIpXHJcbiAgICAgICAgICAgICMgU2F2aW5nLCBhbmQgYmVhdXRpZnkgb24gc2F2ZSBpcyBkaXNhYmxlZFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSggbnVsbCApXHJcblxyXG4gICAgICAgICAgIyBPcHRpb25zIGZvciBMYW5ndWFnZVxyXG4gICAgICAgICAgb3B0aW9ucyA9IEBnZXRPcHRpb25zRm9yTGFuZ3VhZ2UoYWxsT3B0aW9ucywgbGFuZ3VhZ2UpXHJcblxyXG4gICAgICAgICAgIyBHZXQgQmVhdXRpZmllclxyXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoZ3JhbW1hciwgbGFuZ3VhZ2UpXHJcblxyXG4gICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoXCJsYW5ndWFnZSBvcHRpb25zOiAje0pTT04uc3RyaW5naWZ5KG9wdGlvbnMsIG51bGwsIDQpfVwiKVxyXG5cclxuICAgICAgICAgIGxvZ2dlci52ZXJib3NlKGxhbmd1YWdlLm5hbWUsIGZpbGVQYXRoLCBvcHRpb25zLCBhbGxPcHRpb25zKVxyXG5cclxuICAgICAgICAgICMgQ2hlY2sgaWYgdW5zdXBwb3J0ZWQgbGFuZ3VhZ2VcclxuICAgICAgICAgIGJlYXV0aWZpZXIgPSBAZ2V0QmVhdXRpZmllckZvckxhbmd1YWdlKGxhbmd1YWdlKVxyXG4gICAgICAgICAgaWYgbm90IGJlYXV0aWZpZXI/XHJcbiAgICAgICAgICAgIHVuc3VwcG9ydGVkR3JhbW1hciA9IHRydWVcclxuICAgICAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ0JlYXV0aWZpZXIgZm9yIGxhbmd1YWdlIG5vdCBmb3VuZCcpXHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGxvZ2dlci52ZXJib3NlKCdiZWF1dGlmaWVyJywgYmVhdXRpZmllci5uYW1lKVxyXG5cclxuICAgICAgICAgICAgIyBBcHBseSBsYW5ndWFnZS1zcGVjaWZpYyBvcHRpb24gdHJhbnNmb3JtYXRpb25zXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBAdHJhbnNmb3JtT3B0aW9ucyhiZWF1dGlmaWVyLCBsYW5ndWFnZS5uYW1lLCBvcHRpb25zKVxyXG5cclxuICAgICAgICAgICAgIyBCZWF1dGlmeSB0ZXh0IHdpdGggbGFuZ3VhZ2Ugb3B0aW9uc1xyXG4gICAgICAgICAgICBAZW1pdCBcImJlYXV0aWZ5OjpzdGFydFwiXHJcblxyXG4gICAgICAgICAgICBjb250ZXh0ID1cclxuICAgICAgICAgICAgICBmaWxlUGF0aDogZmlsZVBhdGhcclxuICAgICAgICAgICAgICBmaWxlRXh0ZW5zaW9uOiBmaWxlRXh0ZW5zaW9uXHJcblxyXG4gICAgICAgICAgICBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICAgIGJlYXV0aWZpZXIubG9hZEV4ZWN1dGFibGVzKClcclxuICAgICAgICAgICAgICAudGhlbigoZXhlY3V0YWJsZXMpIC0+XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIudmVyYm9zZSgnZXhlY3V0YWJsZXMnLCBleGVjdXRhYmxlcylcclxuICAgICAgICAgICAgICAgIGJlYXV0aWZpZXIuYmVhdXRpZnkodGV4dCwgbGFuZ3VhZ2UubmFtZSwgb3B0aW9ucywgY29udGV4dClcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT5cclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgIyBUcmFjayBUaW1pbmdcclxuICAgICAgICAgICAgICAgIEB0cmFja1RpbWluZyh7XHJcbiAgICAgICAgICAgICAgICAgIHV0YzogXCJCZWF1dGlmeVwiICMgQ2F0ZWdvcnlcclxuICAgICAgICAgICAgICAgICAgdXR2OiBsYW5ndWFnZT8ubmFtZSAjIFZhcmlhYmxlXHJcbiAgICAgICAgICAgICAgICAgIHV0dDogKG5ldyBEYXRlKCkgLSBzdGFydFRpbWUpICMgVmFsdWVcclxuICAgICAgICAgICAgICAgICAgdXRsOiB2ZXJzaW9uICMgTGFiZWxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAjIFRyYWNrIEVtcHR5IGJlYXV0aWZpY2F0aW9uIHJlc3VsdHNcclxuICAgICAgICAgICAgICAgIGlmIG5vdCByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgQHRyYWNrRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGVjOiB2ZXJzaW9uLCAjIENhdGVnb3J5XHJcbiAgICAgICAgICAgICAgICAgICAgZWE6IFwiQmVhdXRpZnk6RW1wdHlcIiAjIEFjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGVsOiBsYW5ndWFnZT8ubmFtZSAjIExhYmVsXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAjIFRyYWNrIEVycm9yc1xyXG4gICAgICAgICAgICAgICAgQHRyYWNrRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICBlYzogdmVyc2lvbiwgIyBDYXRlZ29yeVxyXG4gICAgICAgICAgICAgICAgICBlYTogXCJCZWF1dGlmeTpFcnJvclwiICMgQWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgIGVsOiBsYW5ndWFnZT8ubmFtZSAjIExhYmVsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAuZmluYWxseSg9PlxyXG4gICAgICAgICAgICAgICAgQGVtaXQgXCJiZWF1dGlmeTo6ZW5kXCJcclxuICAgICAgICAgICAgICApXHJcblxyXG4gICAgICAgICMgQ2hlY2sgaWYgQW5hbHl0aWNzIGlzIGVuYWJsZWRcclxuICAgICAgICBAdHJhY2tFdmVudCh7XHJcbiAgICAgICAgICBlYzogdmVyc2lvbiwgIyBDYXRlZ29yeVxyXG4gICAgICAgICAgZWE6IFwiQmVhdXRpZnlcIiAjIEFjdGlvblxyXG4gICAgICAgICAgZWw6IGxhbmd1YWdlPy5uYW1lICMgTGFiZWxcclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmIG9uU2F2ZVxyXG4gICAgICAgICAgQHRyYWNrRXZlbnQoe1xyXG4gICAgICAgICAgICBlYzogdmVyc2lvbiwgIyBDYXRlZ29yeVxyXG4gICAgICAgICAgICBlYTogXCJCZWF1dGlmeTpPblNhdmVcIiAjIEFjdGlvblxyXG4gICAgICAgICAgICBlbDogbGFuZ3VhZ2U/Lm5hbWUgIyBMYWJlbFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBAdHJhY2tFdmVudCh7XHJcbiAgICAgICAgICAgIGVjOiB2ZXJzaW9uLCAjIENhdGVnb3J5XHJcbiAgICAgICAgICAgIGVhOiBcIkJlYXV0aWZ5Ok1hbnVhbFwiICMgQWN0aW9uXHJcbiAgICAgICAgICAgIGVsOiBsYW5ndWFnZT8ubmFtZSAjIExhYmVsXHJcbiAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgaWYgdW5zdXBwb3J0ZWRHcmFtbWFyXHJcbiAgICAgICAgICBpZiBhdG9tLmNvbmZpZy5nZXQoXCJhdG9tLWJlYXV0aWZ5LmdlbmVyYWwubXV0ZVVuc3VwcG9ydGVkTGFuZ3VhZ2VFcnJvcnNcIilcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoIG51bGwgKVxyXG4gICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXBvQnVnc1VybCA9IHBrZy5idWdzLnVybFxyXG4gICAgICAgICAgICB0aXRsZSA9IFwiQXRvbSBCZWF1dGlmeSBjb3VsZCBub3QgZmluZCBhIHN1cHBvcnRlZCBiZWF1dGlmaWVyIGZvciB0aGlzIGZpbGVcIlxyXG4gICAgICAgICAgICBkZXRhaWwgPSBcIlwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgQXRvbSBCZWF1dGlmeSBjb3VsZCBub3QgZGV0ZXJtaW5lIGEgc3VwcG9ydGVkIGJlYXV0aWZpZXIgdG8gaGFuZGxlIHRoaXMgZmlsZSB3aXRoIGdyYW1tYXIgXFxcIiN7Z3JhbW1hcn1cXFwiIGFuZCBleHRlbnNpb24gXFxcIiN7ZmlsZUV4dGVuc2lvbn1cXFwiLiBcXFxyXG4gICAgICAgICAgICAgICAgICAgICBJZiB5b3Ugd291bGQgbGlrZSB0byByZXF1ZXN0IHN1cHBvcnQgZm9yIHRoaXMgZmlsZSBhbmQgaXRzIGxhbmd1YWdlLCBwbGVhc2UgY3JlYXRlIGFuIGlzc3VlIGZvciBBdG9tIEJlYXV0aWZ5IGF0ICN7cmVwb0J1Z3NVcmx9XHJcbiAgICAgICAgICAgICAgICAgICAgIFwiXCJcIlxyXG5cclxuICAgICAgICAgICAgYXRvbT8ubm90aWZpY2F0aW9ucy5hZGRXYXJuaW5nKHRpdGxlLCB7XHJcbiAgICAgICAgICAgICAgZGV0YWlsXHJcbiAgICAgICAgICAgICAgZGlzbWlzc2FibGUgOiB0cnVlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCBudWxsIClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgKVxyXG5cclxuICBmaW5kRmlsZVJlc3VsdHMgOiB7fVxyXG5cclxuXHJcbiAgIyBDTElcclxuICBnZXRVc2VySG9tZSA6IC0+XHJcbiAgICBwcm9jZXNzLmVudi5IT01FIG9yIHByb2Nlc3MuZW52LkhPTUVQQVRIIG9yIHByb2Nlc3MuZW52LlVTRVJQUk9GSUxFXHJcbiAgdmVyaWZ5RXhpc3RzIDogKGZ1bGxQYXRoKSAtPlxyXG4gICAgZnMgPz0gcmVxdWlyZShcImZzXCIpXHJcbiAgICAoIGlmIGZzLmV4aXN0c1N5bmMoZnVsbFBhdGgpIHRoZW4gZnVsbFBhdGggZWxzZSBudWxsIClcclxuXHJcblxyXG5cclxuICAjIFN0b3JhZ2UgZm9yIG1lbW9pemVkIHJlc3VsdHMgZnJvbSBmaW5kIGZpbGVcclxuICAjIFNob3VsZCBwcmV2ZW50IGxvdHMgb2YgZGlyZWN0b3J5IHRyYXZlcnNhbCAmXHJcbiAgIyBsb29rdXBzIHdoZW4gbGluaXRpbmcgYW4gZW50aXJlIHByb2plY3RcclxuICAjIyNcclxuICAgIFNlYXJjaGVzIGZvciBhIGZpbGUgd2l0aCBhIHNwZWNpZmllZCBuYW1lIHN0YXJ0aW5nIHdpdGhcclxuICAgICdkaXInIGFuZCBnb2luZyBhbGwgdGhlIHdheSB1cCBlaXRoZXIgdW50aWwgaXQgZmluZHMgdGhlIGZpbGVcclxuICAgIG9yIGhpdHMgdGhlIHJvb3QuXHJcblxyXG4gICAgQHBhcmFtIHtzdHJpbmd9IG5hbWUgZmlsZW5hbWUgdG8gc2VhcmNoIGZvciAoZS5nLiAuanNoaW50cmMpXHJcbiAgICBAcGFyYW0ge3N0cmluZ30gZGlyIGRpcmVjdG9yeSB0byBzdGFydCBzZWFyY2ggZnJvbSAoZGVmYXVsdDpcclxuICAgIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkpXHJcbiAgICBAcGFyYW0ge2Jvb2xlYW59IHVwd2FyZHMgc2hvdWxkIHJlY3Vyc2UgdXB3YXJkcyBvbiBmYWlsdXJlPyAoZGVmYXVsdDogdHJ1ZSlcclxuXHJcbiAgICBAcmV0dXJucyB7c3RyaW5nfSBub3JtYWxpemVkIGZpbGVuYW1lXHJcbiAgIyMjXHJcbiAgZmluZEZpbGUgOiAobmFtZSwgZGlyLCB1cHdhcmRzID0gdHJ1ZSkgLT5cclxuICAgIHBhdGggPz0gcmVxdWlyZShcInBhdGhcIilcclxuICAgIGRpciA9IGRpciBvciBwcm9jZXNzLmN3ZCgpXHJcbiAgICBmaWxlbmFtZSA9IHBhdGgubm9ybWFsaXplKHBhdGguam9pbihkaXIsIG5hbWUpKVxyXG4gICAgcmV0dXJuIEBmaW5kRmlsZVJlc3VsdHNbZmlsZW5hbWVdIGlmIEBmaW5kRmlsZVJlc3VsdHNbZmlsZW5hbWVdIGlzbnQgdW5kZWZpbmVkXHJcbiAgICBwYXJlbnQgPSBwYXRoLnJlc29sdmUoZGlyLCBcIi4uL1wiKVxyXG4gICAgaWYgQHZlcmlmeUV4aXN0cyhmaWxlbmFtZSlcclxuICAgICAgQGZpbmRGaWxlUmVzdWx0c1tmaWxlbmFtZV0gPSBmaWxlbmFtZVxyXG4gICAgICByZXR1cm4gZmlsZW5hbWVcclxuICAgIGlmIGRpciBpcyBwYXJlbnRcclxuICAgICAgQGZpbmRGaWxlUmVzdWx0c1tmaWxlbmFtZV0gPSBudWxsXHJcbiAgICAgIHJldHVybiBudWxsXHJcbiAgICBpZiB1cHdhcmRzXHJcbiAgICAgIGZpbmRGaWxlIG5hbWUsIHBhcmVudFxyXG4gICAgZWxzZVxyXG4gICAgICByZXR1cm4gbnVsbFxyXG5cclxuXHJcbiAgIyMjXHJcbiAgICBUcmllcyB0byBmaW5kIGEgY29uZmlndXJhdGlvbiBmaWxlIGluIGVpdGhlciBwcm9qZWN0IGRpcmVjdG9yeVxyXG4gICAgb3IgaW4gdGhlIGhvbWUgZGlyZWN0b3J5LiBDb25maWd1cmF0aW9uIGZpbGVzIGFyZSBuYW1lZFxyXG4gICAgJy5qc2JlYXV0aWZ5cmMnLlxyXG5cclxuICAgIEBwYXJhbSB7c3RyaW5nfSBjb25maWcgbmFtZSBvZiB0aGUgY29uZmlndXJhdGlvbiBmaWxlXHJcbiAgICBAcGFyYW0ge3N0cmluZ30gZmlsZSBwYXRoIHRvIHRoZSBmaWxlIHRvIGJlIGxpbnRlZFxyXG4gICAgQHBhcmFtIHtib29sZWFufSB1cHdhcmRzIHNob3VsZCByZWN1cnNlIHVwd2FyZHMgb24gZmFpbHVyZT8gKGRlZmF1bHQ6IHRydWUpXHJcblxyXG4gICAgQHJldHVybnMge3N0cmluZ30gYSBwYXRoIHRvIHRoZSBjb25maWcgZmlsZVxyXG4gICMjI1xyXG4gIGZpbmRDb25maWcgOiAoY29uZmlnLCBmaWxlLCB1cHdhcmRzID0gdHJ1ZSkgLT5cclxuICAgIHBhdGggPz0gcmVxdWlyZShcInBhdGhcIilcclxuICAgIGRpciA9IHBhdGguZGlybmFtZShwYXRoLnJlc29sdmUoZmlsZSkpXHJcbiAgICBlbnZzID0gQGdldFVzZXJIb21lKClcclxuICAgIGhvbWUgPSBwYXRoLm5vcm1hbGl6ZShwYXRoLmpvaW4oZW52cywgY29uZmlnKSlcclxuICAgIHByb2ogPSBAZmluZEZpbGUoY29uZmlnLCBkaXIsIHVwd2FyZHMpXHJcbiAgICBsb2dnZXIudmVyYm9zZShkaXIsIHByb2osIGhvbWUpXHJcbiAgICByZXR1cm4gcHJvaiBpZiBwcm9qXHJcbiAgICByZXR1cm4gaG9tZSBpZiBAdmVyaWZ5RXhpc3RzKGhvbWUpXHJcbiAgICBudWxsXHJcbiAgZ2V0Q29uZmlnT3B0aW9uc0Zyb21TZXR0aW5ncyA6IChsYW5ncykgLT5cclxuICAgIGNvbmZpZyA9IGF0b20uY29uZmlnLmdldCgnYXRvbS1iZWF1dGlmeScpXHJcbiAgICBvcHRpb25zID0gXy5waWNrKGNvbmZpZywgbGFuZ3MpXHJcblxyXG4gICMgTG9vayBmb3IgLmpzYmVhdXRpZmllcnJjIGluIGZpbGUgYW5kIGhvbWUgcGF0aCwgY2hlY2sgZW52IHZhcmlhYmxlc1xyXG4gIGdldENvbmZpZyA6IChzdGFydFBhdGgsIHVwd2FyZHMgPSB0cnVlKSAtPlxyXG4gICAgIyBjb25zb2xlLmxvZygnZ2V0Q29uZmlnJywgc3RhcnRQYXRoLCB1cHdhcmRzKVxyXG4gICAgIyBWZXJpZnkgdGhhdCBzdGFydFBhdGggaXMgYSBzdHJpbmdcclxuICAgIHN0YXJ0UGF0aCA9ICggaWYgKCB0eXBlb2Ygc3RhcnRQYXRoIGlzIFwic3RyaW5nXCIpIHRoZW4gc3RhcnRQYXRoIGVsc2UgXCJcIilcclxuICAgIHJldHVybiB7fSB1bmxlc3Mgc3RhcnRQYXRoXHJcblxyXG5cclxuICAgICMgR2V0IHRoZSBwYXRoIHRvIHRoZSBjb25maWcgZmlsZVxyXG4gICAgY29uZmlnUGF0aCA9IEBmaW5kQ29uZmlnKFwiLmpzYmVhdXRpZnlyY1wiLCBzdGFydFBhdGgsIHVwd2FyZHMpXHJcbiAgICBsb2dnZXIudmVyYm9zZSgnY29uZmlnUGF0aCcsIGNvbmZpZ1BhdGgsIHN0YXJ0UGF0aCwgdXB3YXJkcylcclxuICAgIGV4dGVybmFsT3B0aW9ucyA9IHVuZGVmaW5lZFxyXG4gICAgaWYgY29uZmlnUGF0aFxyXG4gICAgICBmcyA/PSByZXF1aXJlKFwiZnNcIilcclxuICAgICAgdHJ5XHJcbiAgICAgICAgY29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoY29uZmlnUGF0aCxcclxuICAgICAgICAgIGVuY29kaW5nIDogXCJ1dGY4XCJcclxuICAgICAgICApXHJcbiAgICAgIGNhdGNoIGVycm9yXHJcbiAgICAgICAgY29udGVudHMgPSBudWxsICNmaWxlIGlzbnQgYXZhaWxhYmxlIGFueW1vcmVcclxuICAgICAgdW5sZXNzIGNvbnRlbnRzXHJcbiAgICAgICAgZXh0ZXJuYWxPcHRpb25zID0ge31cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRyeVxyXG4gICAgICAgICAgc3RyaXAgPz0gcmVxdWlyZShcInN0cmlwLWpzb24tY29tbWVudHNcIilcclxuICAgICAgICAgIGV4dGVybmFsT3B0aW9ucyA9IEpTT04ucGFyc2Uoc3RyaXAoY29udGVudHMpKVxyXG4gICAgICAgIGNhdGNoIGVcclxuICAgICAgICAgIGpzb25FcnJvciA9IGUubWVzc2FnZVxyXG4gICAgICAgICAgbG9nZ2VyLmRlYnVnIFwiRmFpbGVkIHBhcnNpbmcgY29uZmlnIGFzIEpTT046IFwiICsgY29uZmlnUGF0aFxyXG4gICAgICAgICAgIyBBdHRlbXB0IGFzIFlBTUxcclxuICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICB5YW1sID89IHJlcXVpcmUoXCJ5YW1sLWZyb250LW1hdHRlclwiKVxyXG4gICAgICAgICAgICBleHRlcm5hbE9wdGlvbnMgPSB5YW1sLnNhZmVMb2FkKGNvbnRlbnRzKVxyXG4gICAgICAgICAgY2F0Y2ggZVxyXG4gICAgICAgICAgICB0aXRsZSA9IFwiQXRvbSBCZWF1dGlmeSBmYWlsZWQgdG8gcGFyc2UgY29uZmlnIGFzIEpTT04gb3IgWUFNTFwiXHJcbiAgICAgICAgICAgIGRldGFpbCA9IFwiXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICBQYXJzaW5nICcuanNiZWF1dGlmeXJjJyBhdCAje2NvbmZpZ1BhdGh9XHJcbiAgICAgICAgICAgICAgICAgICAgIEpTT046ICN7anNvbkVycm9yfVxyXG4gICAgICAgICAgICAgICAgICAgICBZQU1MOiAje2UubWVzc2FnZX1cclxuICAgICAgICAgICAgICAgICAgICAgXCJcIlwiXHJcbiAgICAgICAgICAgIGF0b20/Lm5vdGlmaWNhdGlvbnMuYWRkV2FybmluZyh0aXRsZSwge1xyXG4gICAgICAgICAgICAgIGRldGFpbFxyXG4gICAgICAgICAgICAgIGRpc21pc3NhYmxlIDogdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcgXCJGYWlsZWQgcGFyc2luZyBjb25maWcgYXMgWUFNTCBhbmQgSlNPTjogXCIgKyBjb25maWdQYXRoXHJcbiAgICAgICAgICAgIGV4dGVybmFsT3B0aW9ucyA9IHt9XHJcbiAgICBlbHNlXHJcbiAgICAgIGV4dGVybmFsT3B0aW9ucyA9IHt9XHJcbiAgICByZXR1cm4gZXh0ZXJuYWxPcHRpb25zXHJcblxyXG4gIGdldE9wdGlvbnNGb3JQYXRoIDogKGVkaXRlZEZpbGVQYXRoLCBlZGl0b3IpIC0+XHJcbiAgICBsYW5ndWFnZU5hbWVzcGFjZXMgPSBAbGFuZ3VhZ2VzLm5hbWVzcGFjZXNcclxuXHJcblxyXG4gICAgIyBFZGl0b3IgT3B0aW9uc1xyXG4gICAgZWRpdG9yT3B0aW9ucyA9IHt9XHJcbiAgICBpZiBlZGl0b3I/XHJcblxyXG4gICAgICAjIEdldCBjdXJyZW50IEF0b20gZWRpdG9yIGNvbmZpZ3VyYXRpb25cclxuICAgICAgaXNTZWxlY3Rpb24gPSAhIWVkaXRvci5nZXRTZWxlY3RlZFRleHQoKVxyXG4gICAgICBzb2Z0VGFicyA9IGVkaXRvci5zb2Z0VGFic1xyXG4gICAgICB0YWJMZW5ndGggPSBlZGl0b3IuZ2V0VGFiTGVuZ3RoKClcclxuICAgICAgZWRpdG9yT3B0aW9ucyA9XHJcbiAgICAgICAgaW5kZW50X3NpemUgOiAoIGlmIHNvZnRUYWJzIHRoZW4gdGFiTGVuZ3RoIGVsc2UgMSlcclxuICAgICAgICBpbmRlbnRfY2hhciA6ICggaWYgc29mdFRhYnMgdGhlbiBcIiBcIiBlbHNlIFwiXFx0XCIpXHJcbiAgICAgICAgaW5kZW50X3dpdGhfdGFicyA6IG5vdCBzb2Z0VGFic1xyXG5cclxuICAgICMgRnJvbSBQYWNrYWdlIFNldHRpbmdzXHJcbiAgICBjb25maWdPcHRpb25zID0gQGdldENvbmZpZ09wdGlvbnNGcm9tU2V0dGluZ3MobGFuZ3VhZ2VOYW1lc3BhY2VzKVxyXG5cclxuXHJcbiAgICAjIEdldCBjb25maWd1cmF0aW9uIGluIFVzZXIncyBIb21lIGRpcmVjdG9yeVxyXG4gICAgdXNlckhvbWUgPSBAZ2V0VXNlckhvbWUoKVxyXG5cclxuXHJcbiAgICAjIEZBS0VGSUxFTkFNRSBmb3JjZXMgYHBhdGhgIHRvIHRyZWF0IGFzIGZpbGUgcGF0aCBhbmQgaXRzIHBhcmVudCBkaXJlY3RvcnlcclxuICAgICMgaXMgdGhlIHVzZXJIb21lLiBTZWUgaW1wbGVtZW50YXRpb24gb2YgZmluZENvbmZpZ1xyXG4gICAgIyBhbmQgaG93IHBhdGguZGlybmFtZShESVJFQ1RPUlkpIHJldHVybnMgdGhlIHBhcmVudCBkaXJlY3Rvcnkgb2YgRElSRUNUT1JZXHJcbiAgICBob21lT3B0aW9ucyA9IEBnZXRDb25maWcocGF0aC5qb2luKHVzZXJIb21lLCBcIkZBS0VGSUxFTkFNRVwiKSwgZmFsc2UpXHJcbiAgICBpZiBlZGl0ZWRGaWxlUGF0aD9cclxuXHJcbiAgICAgICMgSGFuZGxlIEVkaXRvckNvbmZpZyBvcHRpb25zXHJcbiAgICAgICMgaHR0cDovL2VkaXRvcmNvbmZpZy5vcmcvXHJcbiAgICAgIGVkaXRvcmNvbmZpZyA/PSByZXF1aXJlKCdlZGl0b3Jjb25maWcnKVxyXG4gICAgICBlZGl0b3JDb25maWdPcHRpb25zID0gZWRpdG9yY29uZmlnLnBhcnNlKGVkaXRlZEZpbGVQYXRoKVxyXG4gICAgICAudGhlbigoZWRpdG9yQ29uZmlnT3B0aW9ucykgLT5cclxuXHJcbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ2VkaXRvckNvbmZpZ09wdGlvbnMnLCBlZGl0b3JDb25maWdPcHRpb25zKVxyXG5cclxuICAgICAgICAjIFRyYW5zZm9ybSBFZGl0b3JDb25maWcgdG8gQXRvbSBCZWF1dGlmeSdzIGNvbmZpZyBzdHJ1Y3R1cmUgYW5kIG5hbWluZ1xyXG4gICAgICAgIGlmIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X3N0eWxlIGlzICdzcGFjZSdcclxuICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X2NoYXIgPSBcIiBcIlxyXG5cclxuICAgICAgICAjIGlmIChlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF9zaXplKVxyXG4gICAgICAgICMgZWRpdG9yQ29uZmlnT3B0aW9ucy5pbmRlbnRfc2l6ZSA9IGNvbmZpZy5pbmRlbnRfc2l6ZVxyXG4gICAgICAgIGVsc2UgaWYgZWRpdG9yQ29uZmlnT3B0aW9ucy5pbmRlbnRfc3R5bGUgaXMgJ3RhYidcclxuICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X2NoYXIgPSBcIlxcdFwiXHJcbiAgICAgICAgICBlZGl0b3JDb25maWdPcHRpb25zLmluZGVudF93aXRoX3RhYnMgPSB0cnVlXHJcbiAgICAgICAgICBpZiAoZWRpdG9yQ29uZmlnT3B0aW9ucy50YWJfd2lkdGgpXHJcbiAgICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnMuaW5kZW50X3NpemUgPSBlZGl0b3JDb25maWdPcHRpb25zLnRhYl93aWR0aFxyXG5cclxuICAgICAgICAjIE5lc3Qgb3B0aW9ucyB1bmRlciBfZGVmYXVsdCBuYW1lc3BhY2VcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgX2RlZmF1bHQ6XHJcbiAgICAgICAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnNcclxuICAgICAgICAgIH1cclxuICAgICAgKVxyXG5cclxuICAgICAgIyBHZXQgYWxsIG9wdGlvbnMgaW4gY29uZmlndXJhdGlvbiBmaWxlcyBmcm9tIHRoaXMgZGlyZWN0b3J5IHVwd2FyZHMgdG8gcm9vdFxyXG4gICAgICBwcm9qZWN0T3B0aW9ucyA9IFtdXHJcbiAgICAgIHAgPSBwYXRoLmRpcm5hbWUoZWRpdGVkRmlsZVBhdGgpXHJcblxyXG5cclxuICAgICAgIyBDaGVjayBpZiBwIGlzIHJvb3QgKHRvcCBkaXJlY3RvcnkpXHJcbiAgICAgIHdoaWxlIHAgaXNudCBwYXRoLnJlc29sdmUocCwgXCIuLi9cIilcclxuXHJcbiAgICAgICAgIyBHZXQgY29uZmlnIGZvciBwXHJcbiAgICAgICAgcGYgPSBwYXRoLmpvaW4ocCwgXCJGQUtFRklMRU5BTUVcIilcclxuICAgICAgICBwYyA9IEBnZXRDb25maWcocGYsIGZhbHNlKVxyXG5cclxuICAgICAgICBpc05lc3RlZCA9IEBpc05lc3RlZE9wdGlvbnMocGMpXHJcbiAgICAgICAgdW5sZXNzIGlzTmVzdGVkXHJcbiAgICAgICAgICBwYyA9IHtcclxuICAgICAgICAgICAgX2RlZmF1bHQ6IHBjXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICMgQWRkIGNvbmZpZyBmb3IgcCB0byBwcm9qZWN0J3MgY29uZmlnIG9wdGlvbnNcclxuICAgICAgICBwcm9qZWN0T3B0aW9ucy5wdXNoKHBjKVxyXG5cclxuICAgICAgICAjIGxvZ2dlci52ZXJib3NlIHAsIHBjXHJcbiAgICAgICAgIyBNb3ZlIHVwd2FyZHNcclxuICAgICAgICBwID0gcGF0aC5yZXNvbHZlKHAsIFwiLi4vXCIpXHJcbiAgICBlbHNlXHJcbiAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnMgPSB7fVxyXG4gICAgICBwcm9qZWN0T3B0aW9ucyA9IFtdXHJcblxyXG4gICAgIyBDb21iaW5lIGFsbCBvcHRpb25zIHRvZ2V0aGVyXHJcbiAgICBhbGxPcHRpb25zID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgX2RlZmF1bHQ6XHJcbiAgICAgICAgICBlZGl0b3JPcHRpb25zXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvbmZpZ09wdGlvbnMsXHJcbiAgICAgIHtcclxuICAgICAgICBfZGVmYXVsdDpcclxuICAgICAgICAgIGhvbWVPcHRpb25zXHJcbiAgICAgIH0sXHJcbiAgICAgIGVkaXRvckNvbmZpZ09wdGlvbnNcclxuICAgIF1cclxuICAgICMgUmV2ZXJzZSBhbmQgYWRkIHByb2plY3RPcHRpb25zIHRvIGFsbCBvcHRpb25zXHJcbiAgICBwcm9qZWN0T3B0aW9ucy5yZXZlcnNlKClcclxuICAgIGFsbE9wdGlvbnMgPSBhbGxPcHRpb25zLmNvbmNhdChwcm9qZWN0T3B0aW9ucylcclxuXHJcbiAgICAjIGxvZ2dlci52ZXJib3NlKGFsbE9wdGlvbnMpXHJcbiAgICByZXR1cm4gYWxsT3B0aW9uc1xyXG5cclxuICBpc05lc3RlZE9wdGlvbnMgOiAoY3Vyck9wdGlvbnMpIC0+XHJcbiAgICBjb250YWluc05lc3RlZCA9IGZhbHNlXHJcbiAgICBrZXkgPSB1bmRlZmluZWRcclxuXHJcbiAgICAjIENoZWNrIGlmIGFscmVhZHkgbmVzdGVkIHVuZGVyIF9kZWZhdWx0XHJcbiAgICBpZiBjdXJyT3B0aW9ucy5fZGVmYXVsdFxyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICMgQ2hlY2sgdG8gc2VlIGlmIGNvbmZpZyBmaWxlIHVzZXMgbmVzdGVkIG9iamVjdCBmb3JtYXQgdG8gc3BsaXQgdXAganMvY3NzL2h0bWwgb3B0aW9uc1xyXG4gICAgZm9yIGtleSBvZiBjdXJyT3B0aW9uc1xyXG5cclxuICAgICAgIyBDaGVjayBpZiBpcyBzdXBwb3J0ZWQgbGFuZ3VhZ2VcclxuICAgICAgaWYgXy5pbmRleE9mKEBsYW5ndWFnZXMubmFtZXNwYWNlcywga2V5KSA+PSAwIGFuZCB0eXBlb2YgY3Vyck9wdGlvbnNba2V5XSBpcyBcIm9iamVjdFwiICMgQ2hlY2sgaWYgbmVzdGVkIG9iamVjdCAobW9yZSBvcHRpb25zIGluIHZhbHVlKVxyXG4gICAgICAgIGNvbnRhaW5zTmVzdGVkID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrICMgRm91bmQsIGJyZWFrIG91dCBvZiBsb29wLCBubyBuZWVkIHRvIGNvbnRpbnVlXHJcblxyXG4gICAgcmV0dXJuIGNvbnRhaW5zTmVzdGVkXHJcblxyXG4gIGdldE9wdGlvbnMgOiAoc2VsZWN0aW9ucywgYWxsT3B0aW9ucykgPT5cclxuICAgIHNlbGYgPSB0aGlzXHJcbiAgICBfID89IHJlcXVpcmUoXCJsb2Rhc2hcIilcclxuICAgIGV4dGVuZCA/PSByZXF1aXJlKFwiZXh0ZW5kXCIpXHJcblxyXG4gICAgbG9nZ2VyLnZlcmJvc2UoJ2dldE9wdGlvbnMgc2VsZWN0aW9ucycsIHNlbGVjdGlvbnMsIGFsbE9wdGlvbnMpXHJcblxyXG4gICAgIyBsb2dnZXIudmVyYm9zZShzZWxlY3Rpb24sIGFsbE9wdGlvbnMpO1xyXG4gICAgIyBSZWR1Y2UgYWxsIG9wdGlvbnMgaW50byBjb3JyZWN0bHkgbWVyZ2VkIG9wdGlvbnMuXHJcbiAgICBvcHRpb25zID0gXy5yZWR1Y2UoYWxsT3B0aW9ucywgKHJlc3VsdCwgY3Vyck9wdGlvbnMpID0+XHJcbiAgICAgIGNvbGxlY3RlZENvbmZpZyA9IGN1cnJPcHRpb25zLl9kZWZhdWx0IG9yIHt9XHJcbiAgICAgIGNvbnRhaW5zTmVzdGVkID0gQGlzTmVzdGVkT3B0aW9ucyhjdXJyT3B0aW9ucylcclxuICAgICAgbG9nZ2VyLnZlcmJvc2UoY29udGFpbnNOZXN0ZWQsIGN1cnJPcHRpb25zKVxyXG4gICAgICAjIGxvZ2dlci52ZXJib3NlKGNvbnRhaW5zTmVzdGVkLCBjdXJyT3B0aW9ucyk7XHJcblxyXG4gICAgICAjIENyZWF0ZSBhIGZsYXQgb2JqZWN0IG9mIGNvbmZpZyBvcHRpb25zIGlmIG5lc3RlZCBmb3JtYXQgd2FzIHVzZWRcclxuICAgICAgdW5sZXNzIGNvbnRhaW5zTmVzdGVkXHJcbiAgICAgICAgIyBfLm1lcmdlIGNvbGxlY3RlZENvbmZpZywgY3Vyck9wdGlvbnNcclxuICAgICAgICBjdXJyT3B0aW9ucyA9IHtcclxuICAgICAgICAgIF9kZWZhdWx0OiBjdXJyT3B0aW9uc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICMgTWVyZ2Ugd2l0aCBzZWxlY3RlZCBvcHRpb25zXHJcbiAgICAgICMgd2hlcmUgYHNlbGVjdGlvbmAgY291bGQgYmUgYGh0bWxgLCBganNgLCAnY3NzJywgZXRjXHJcbiAgICAgIGZvciBzZWxlY3Rpb24gaW4gc2VsZWN0aW9uc1xyXG4gICAgICAgICMgTWVyZ2UgY3VycmVudCBvcHRpb25zIG9uIHRvcCBvZiBmYWxsYmFjayBvcHRpb25zXHJcbiAgICAgICAgbG9nZ2VyLnZlcmJvc2UoJ29wdGlvbnMnLCBzZWxlY3Rpb24sIGN1cnJPcHRpb25zW3NlbGVjdGlvbl0pXHJcbiAgICAgICAgXy5tZXJnZSBjb2xsZWN0ZWRDb25maWcsIGN1cnJPcHRpb25zW3NlbGVjdGlvbl1cclxuICAgICAgICBsb2dnZXIudmVyYm9zZSgnb3B0aW9ucycsIHNlbGVjdGlvbiwgY29sbGVjdGVkQ29uZmlnKVxyXG5cclxuICAgICAgZXh0ZW5kIHJlc3VsdCwgY29sbGVjdGVkQ29uZmlnXHJcbiAgICAsIHt9KVxyXG5cclxuXHJcbiAgICAjIFRPRE86IENsZWFuLlxyXG4gICAgIyBUaGVyZSBpcyBhIGJ1ZyBpbiBub3B0XHJcbiAgICAjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbnBtL25vcHQvaXNzdWVzLzM4XHJcbiAgICAjIGxvZ2dlci52ZXJib3NlKCdwcmUtY2xlYW4nLCBKU09OLnN0cmluZ2lmeShvcHRpb25zKSk7XHJcbiAgICAjIG9wdGlvbnMgPSBjbGVhbk9wdGlvbnMob3B0aW9ucywga25vd25PcHRzKTtcclxuICAgICMgbG9nZ2VyLnZlcmJvc2UoJ3Bvc3QtY2xlYW4nLCBKU09OLnN0cmluZ2lmeShvcHRpb25zKSk7XHJcbiAgICBvcHRpb25zXHJcbiJdfQ==
